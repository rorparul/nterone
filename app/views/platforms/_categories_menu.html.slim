.categories.hidden-xs
  .row.text-center
    - categories.each do |parent_category|
      = link_to user_signed_in? && current_user.admin? ? "#{parent_category.position} #{parent_category.title}" : parent_category.title,
                platform_category_path(parent_category.platform, parent_category),
                class: "btn btn-category category #{'active-category' if parent_category == category || parent_category.children.include?(category)}"
    .col-xs-12
      hr
    .row.sub-categories.text-center
      = link_to t('training.category.filter.show_all'),
                platform_category_path(category.parent ? category.parent.platform : category.platform, category.parent ? category.parent : category),
                class: "btn btn-child-category sub-category #{'active-category' if category.parent == nil}"
      - categories.each do |parent_category|
        - if parent_category == category || parent_category == category.parent
          - parent_category.children.sort_by{ |cc| cc.position }.each do |child_category|
            = link_to user_signed_in? && current_user.admin? ? "#{child_category.position} #{child_category.title}" : child_category.title,
                      platform_category_path(child_category.platform, child_category),
                      class: "btn btn-child-category sub-category #{'active-category' if child_category == category}"
                      
.categories-mobile.visible-xs
  .panel-group
    - categories.each do |parent_category|
      .panel
        .panel-heading
          = link_to user_signed_in? && current_user.admin? ? "#{parent_category.position} #{parent_category.title}" : parent_category.title,
                    platform_category_path(parent_category.platform, parent_category),
                    class: "btn btn-category #{'active-category' if parent_category == category || parent_category.children.include?(category)}"
        - if parent_category == category || parent_category == category.parent
          .panel-collapse
            = link_to t('generic.action.show_all'),
                      platform_category_path(category.parent ? category.parent.platform : category.platform, category.parent ? category.parent : category),
                      class: "btn btn-child-category sub-category #{'active-category' if category.parent == nil}"
            - parent_category.children.sort_by{ |cc| cc.position }.each do |child_category|
              = link_to user_signed_in? && current_user.admin? ? "#{child_category.position} #{child_category.title}" : child_category.title,
                        platform_category_path(child_category.platform, child_category),
                        class: "btn btn-child-category sub-category #{'active-category' if child_category == category}"
