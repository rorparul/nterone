- if user_signed_in? && current_user.admin?
  - content_for :actions do
    li
      = link_to new_file_path, remote: true do
        = t('lab_rentals.index.upload_file')

= render 'layouts/tabs'

.container-fluid
  .row
    .col-xs-12
      ul.nav.nav-tabs style='margin-bottom: 10px;'
        li.active role="presentation" title='Labs List'
          = link_to "javascript:void(0)", id: 'btn-list-view' do
            span.glyphicon.glyphicon-th-list
            |  Labs
        li role="presentation" title='Labs Calendar'
          = link_to "javascript:void(0)", id: 'btn-calender-view', data: { load_calander: "true" } do
            span.glyphicon.glyphicon-calendar
            |  Labs
        li role="presentation" title='Classes List'
          = link_to "javascript:void(0)", id: 'list-view-classes' do
            span.glyphicon.glyphicon-th-list
            |  Classes
        li role="presentation" title='Classes &amp; Resource Events Calendar'
          = link_to "javascript:void(0)", id: 'btn-calender-view-classes', data: { load_calander: "true" } do
            span.glyphicon.glyphicon-calendar
            |  Classes & Resource Events
      div.classes_view
        = render partial: 'lab_rental_filter'

javascript:
  $('.permissions .lab-rentals').addClass('active');

  $("#calendar-view-container").addClass('hidden');
  $("#classes-calendar-view-container").addClass('hidden');

  $("#list-view-classes").click(function(){
    $("#list-view-classes").parent().addClass('active')
    $("#btn-list-view").parent().removeClass('active');
    $("#btn-calender-view").parent().removeClass('active');
    $("#btn-calender-view-classes").parent().removeClass('active')

    $("#list-view-container").addClass('hidden');
    $("#calendar-view-container").addClass('hidden');
    $("#classes-list-view-container").removeClass('hide');
    $("#view-filter-controls").addClass("hidden")
    $("#classes-calendar-view-container").addClass("hidden");
    $.ajax({
      type: "GET",
      url: "/admin/classes",
      data: {view_type : "lab_classes_list_view"},
      dataType: "script"
    });
  });

  $("#btn-list-view").on('click', function() {
    $("#btn-list-view").parent().addClass('active');
    $("#btn-calender-view").parent().removeClass('active');

    $("#list-view-classes").parent().removeClass('active')
    $("#btn-calender-view-classes").parent().removeClass('active')

    $("#list-view-container").removeClass('hidden');
    $("#calendar-view-container").addClass('hidden');
    $("#classes-list-view-container").addClass('hide');
    $("#view-filter-controls").removeClass("hidden");
    $("#classes-calendar-view-container").addClass("hidden");
    location.reload();
  });
  $("#btn-calender-view-classes").on('click', function() {
    $("#btn-calender-view-classes").parent().addClass('active');
    $("#btn-list-view").parent().removeClass('active');
    $("#btn-calender-view").parent().removeClass('active');
    $("#list-view-classes").parent().removeClass('active');

    $("#view-filter-controls").addClass('hidden');
    $("#calendar-view-container").addClass('hidden');
    $("#classes-list-view-container").addClass('hide');
    $("#list-view-container").addClass('hidden');
    $("#classes-calendar-view-container").removeClass('hidden')
      $('#calendar-view2').fullCalendar({
        events: '/admin/classes.json',
        loading: function(isLoading, view) {
            if(isLoading) {
              $(".calander_loading").removeClass('hidden');
            } else {
              $(".calander_loading").addClass('hidden');
            }
        },
        eventClick: function(event) {
          if (event.url) {
            window.open(event.url);
            return false;
          }
        }
      })
    if($(this).data("loadCalander") == true){
      $(this).data("loadCalander", false)
    }
  });

  $("#btn-calender-view").on('click', function() {
     $("#btn-calender-view").parent().addClass('active')
      $("#btn-list-view").parent().removeClass('active');
      $("#btn-calender-view-classes").parent().removeClass('active')
      $("#list-view-classes").parent().removeClass('active')

      $("#view-filter-controls").addClass('hidden');
      $("#calendar-view-container").removeClass('hidden');
      $("#list-view-container").addClass('hidden');
      $("#classes-list-view-container").addClass('hide');
      $("#classes-calendar-view-container").addClass("hidden");

      $('#calendar-view').fullCalendar({
        events: '/lab-reservations.json',
        loading: function(isLoading, view) {
            if(isLoading) {
              $(".calander_loading").removeClass('hidden');
            } else {
              $(".calander_loading").addClass('hidden');
            }
        },
        eventClick: function(event) {
          if (event.url) {
            window.open(event.url);
            return false;
          }
        }
      })
      if($(this).data("loadCalander") == true){
        $(this).data("loadCalander", false)
      }
  });
